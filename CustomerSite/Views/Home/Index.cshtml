@using Ecommerce.DTO.DTOs
@{
    ViewData["Title"] = "Home Page";
    List<CategoryDTO> categories = ViewBag.categories;
    List<BrandDTO> brands = ViewBag.brands;
    List<ProductDTO> highRatings = ViewBag.highRatings;
    List<ProductDTO> newProducts = ViewBag.newProducts;
    var count = 0;
}
<!--Banner Carousel-->
<div class="slide-wrapper">
    <div id="bannerSlide" class="carousel slide" data-bs-interval="5000" data-bs-ride="true">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="~/Images/Index/Banner1.jpg" class="d-block h-25 w-100" alt="Banner1">
            </div>
            <div class="carousel-item">
                <img src="~/Images/Index/Banner2.jpg" class="d-block h-25 w-100" alt="Banner2">
            </div>
            <div class="carousel-item">
                <img src="~/Images/Index/Banner3.jpg" class="d-block h-25 w-100" alt="Banner3">
            </div>
        </div>
        <div class="slide-control">
            <button class="carousel-control-prev" type="button" data-bs-target="#bannerSlide" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#bannerSlide" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>
</div>
<div class="col-2 p-3" style="background-color:lightgray">
    <div class="p-0" style="position: sticky; top: 10%;">
        <!--Collapse menu for Categories-->
        @if (categories != null && categories.Count > 0)
        {
            <div class="p-0">
                <div class="m-0" type="button" data-bs-toggle="collapse" data-bs-target="#categories" aria-expanded="false">
                    <h5>CATEGORIES</h5>
                </div>
                <div id="categories" class="collapse btn-group-vertical p-3 m-0">
                    @foreach (CategoryDTO category in categories)
                    {
                        <a class="btn text-start" asp-action="ProductsByCategory" asp-controller="Product" asp-route-categoryName="@category.Name">
                            <h6>@category.Name.ToUpper()</h6>
                        </a>
                    }
                </div>
            </div>
        }
        <hr />
        <!--Collapse menu for Brands-->
        @if (brands != null && (brands.Count > 0))
        {
            <div class="p-0">
                <div class="m-0" type="button" data-bs-toggle="collapse" data-bs-target="#brands" aria-expanded="false">
                    <h5>BRANDS</h5>
                </div>
                <div id="brands" class="collapse btn-group-vertical p-3 m-0">
                    @foreach (BrandDTO brand in brands)
                    {
                        <a class="btn text-start" href="#"><h6>@brand.Name.ToUpper()</h6></a>
                    }
                </div>
            </div>
        }
    </div>
</div>
<div class="text-center col-10">
    <div class="row">
        @if (highRatings != null && highRatings.Count > 0)
        {
            <h4 class="mt-3">High ratings</h4>
            <div class="row">
                @foreach (ProductDTO product in highRatings)
                {
                    if (product.Status == 1)
                    {
                        //pass count to partial view as a viewdata key-value
                        //so the slide controls know which carousel to slide
                        ViewData["count"] = count;
                        <partial view-data="ViewData" name="../Product/ProductPartialView" for="@product" />
                        count++;
                    }
                }
            </div>
            <hr />
        }
        @if (newProducts != null && newProducts.Count > 0)
        {
            <h4>New products</h4>
            <div class="row">
                @foreach (ProductDTO product in newProducts)
                {
                    if (product.Status == 1)
                    {
                        //pass count to partial view as a viewdata key-value
                        //so the slide controls know which carousel to slide
                        ViewData["count"] = count;
                        <partial view-data="ViewData" name="../Product/ProductPartialView" for="@product" />
                        count++;
                    }
                }
            </div>
            <hr />
        }
    </div>
</div>
